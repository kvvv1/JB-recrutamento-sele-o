{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/optimized.css') }}">
{% endblock %}

{% block title %}
Sistema RS - Atualizar Ficha
{% endblock %}

{% block content %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

<!-- Alerta de problema no auto-salvamento -->
<div class="alert alert-warning" style="display: none;" role="alert">
    <strong>ATENÇÃO:</strong> Estamos com problemas para salvar automaticamente. Salve manualmente!
</div>

<style>
    .header-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .header-info .info-item {
        display: flex;
        align-items: center;
    }

    .header-info .info-item i {
        font-size: 1.5rem;
        color: #AB1A18;
        margin-right: 10px;
    }

    .header-info .info-item span {
        font-weight: bold;
        font-size: 1rem;
    }

    .header-info .info-item .file-link {
        font-weight: normal;
        font-size: 1rem;
        color: #007bff;
        text-decoration: none;
    }

    .header-info .info-item .file-link:hover {
        text-decoration: underline;
    }

    .form-section {
        margin-bottom: 30px;
    }

    .form-section h4 {
        margin-bottom: 20px;
        font-size: 1.5rem;
        color: #AB1A18;
        border-bottom: 2px solid #AB1A18;
        padding-bottom: 5px;
    }

    .form-group {
        margin-bottom: 15px;
    }

    .form-group label {
        font-weight: bold;
        font-size: 1rem;
        color: #333;
    }

    .form-control {
        border-radius: 5px;
    }

    .form-check-input {
        margin-right: 15px;
        /* Espaçamento maior entre o checkbox e o texto */
        transform: scale(1.3);
        /* Aumenta o tamanho do checkbox */
        position: relative;
        /* Garante que o checkbox fique corretamente alinhado */
        top: 0;
        /* Centraliza o checkbox verticalmente */
    }

    .checkbox-group {
        display: block;
        /* Exibir um abaixo do outro */
    }



    .checkbox-group .form-check {
        margin-bottom: 10px;
    }

    .checkbox-group .form-check input[type="checkbox"] {
        margin-right: 10px;
        transform: scale(1.5);
    }

    .btn-custom {
        background-color: #AB1A18;
        color: white;
        border-radius: 5px;
        padding: 10px 20px;
        font-size: 1.2rem;
    }

    .btn-custom:hover {
        background-color: #931517;
        color: white;
    }

    @media (max-width: 768px) {
        .header-info {
            flex-direction: column;
            align-items: flex-start;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .checkbox-group .form-check {
            flex: 1 1 100%;
        }
    }

    select {
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48cGF0aCBkPSJNNC4wNzggNy4xMDhsMy45MTMtMy45MTIgMy45MTEgMy45MTEtLjcwNi42OTMtMy4yMDUtMy4yMDQtMy4yMDMgMy4yMDN6Ii8+PC9zdmc+') no-repeat right 10px center;
        background-color: #fff;
        padding: 10px 16px;
        /* Aumenta o espaçamento interno */
        border-radius: 5px;
        border: 1px solid #ccc;
        font-size: 1rem;
        color: #333;
        width: 100%;
        /* Garante que o select ocupe toda a largura disponível */
        max-width: 100%;
        /* Limita a largura máxima ao tamanho do contêiner */
        min-width: 125px;
        /* Define uma largura mínima para evitar que o select fique muito pequeno */
        cursor: pointer;
    }


    select:focus {
        outline: none;
        border-color: #AB1A18;
    }

    select::-ms-expand {
        display: none;
    }

    .checkbox-group.checkbox-regioes {
        display: flex;
        flex-wrap: wrap;
    }

    .checkbox-group.checkbox-regioes .form-check {
        display: block;
        margin-bottom: 5px;
        flex: 1 1 30%;
        margin-bottom: 10px;
    }

    .checkbox-group.checkbox-regioes .form-check input[type="checkbox"] {
        margin-right: 5px;
        transform: none;
    }

    .evaluation-section {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding: 10px;
        background-color: #f8f9fa;
        border-radius: 5px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .evaluation-section .evaluation-item {
        display: flex;
        align-items: center;
        margin-right: 10px;
        flex: 1;
    }

    .evaluation-section .evaluation-item:last-child {
        margin-right: 0;
    }

    .evaluation-section .evaluation-item label {
        font-weight: bold;
        font-size: 1rem;
        color: #AB1A18;
        margin-right: 5px;
    }

    .evaluation-section .evaluation-item select,
    .evaluation-section .evaluation-item input[type="text"] {
        margin-right: 10px;
        border-radius: 3px;
        padding: 5px;
        font-size: 0.9rem;
        width: auto;
    }

    .recruiter-modal {
        max-width: 400px;
        /* Largura máxima desejada */
        margin: auto;
        /* Centraliza o modal */
    }

    .recruiter-modal .modal-content {
        border: none;
        /* Remove borda */
        border-radius: 8px;
        /* Canto arredondado */
    }

    /* Sobrescreve o estilo para o modal de recrutador */
    .recruiter-modal.modal-dialog {
        max-width: 400px;
        /* Define a largura específica para o modal de recrutador */
        height: auto;
        /* Ajusta a altura automática para caber o conteúdo */
        margin: auto;
        /* Centraliza o modal */
        padding: 15px;
        /* Adiciona um pouco de padding se necessário */
    }

    .modal-dialog {
        max-width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
    }

    .modal-content {
        height: 100%;
        border: none;
        border-radius: 0;
    }

    /* Faz com que o iframe ocupe toda a área do modal */
    #curriculoIframe {
        width: 100%;
        height: 100%;
        border: none;
    }

    /* Evita que a página de trás role enquanto o modal está aberto */
    body.modal-open {
        overflow: hidden;
    }

    .btn-primary {
        background-color: #AB1A18;
        color: white;
        border-color: #AB1A18;
    }


    .btn-danger {
        background-color: #AB1A18;
        color: #ffffff;
        border-color: #931517;
    }

    .btn-danger:hover {
        background-color: #931517;
        color: #ffffff;
    }

    .btn-secondary {
        background-color: #6c757d;
        color: #ffffff;
        border-color: #6c757d;
    }

    .btn-secondary:hover {
        background-color: #5a6268;
        color: #ffffff;
    }

    .checkbox-group {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        /* Três colunas */
        gap: 15px;
        /* Espaçamento entre os itens */
    }

    .form-check {
        background-color: #f8f9fa;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #ccc;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        font-size: 0.85rem;
        /* Reduz o tamanho da fonte */
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .form-check:hover {
        background-color: #e9ecef;
        /* Muda o fundo ao passar o mouse */
    }

    .form-check:hover {
        background-color: #e9ecef;
        /* Muda o fundo ao passar o mouse */
    }

    .form-check-label {
        font-weight: bold;
        /* Reaplica o negrito */
        margin-left: 5px;
        /* Espaço entre o checkbox e o texto */
    }


    /* Ajuste para manter o alinhamento no modo responsivo */
    @media (max-width: 768px) {
        .checkbox-group {
            grid-template-columns: repeat(2, 1fr);
            /* Alterna para duas colunas em telas menores */
        }
    }

    /* Estilo do retângulo transparente com o texto "Selecionar Cargo Indicado" */
    .select-indicated-cargo {
        border: 1px solid #AB1A18;
        padding: 10px;
        background-color: rgba(255, 255, 255, 0.5);
        /* Transparente */
        border-radius: 5px;
        text-align: center;
        transition: background-color 0.3s ease;
    }

    .select-indicated-cargo:hover {
        background-color: rgba(255, 255, 255, 0.8);
        /* Muda a opacidade ao passar o mouse */
    }

    .select-indicated-cargo p {
        margin: 0;
        color: #AB1A18;
        font-weight: bold;
    }

    #cargo-indicado-checkboxes {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        /* Duas colunas */
        gap: 10px;
        /* Espaçamento entre os itens */
        margin-top: 10px;
    }

    .back-button {
        position: absolute;
        top: 20px;
        left: 250px;
        z-index: 1050;
        padding: 10px 15px;
        background-color: #AB1A18;
        color: white;
        border-radius: 5px;
        text-decoration: none;
        display: flex;
        align-items: center;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: left 0.3s ease;
    }

    .back-button:hover {
        background-color: #8E1615;
        color: white;
        text-decoration: none;
    }

    /* Estilo do pop-up */
    #auto-save-popup {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #4CAF50;
        /* Verde para sucesso */
        color: white;
        padding: 10px 20px;
        border-radius: 5px;
        font-size: 14px;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.5s ease, visibility 0.5s ease;
        z-index: 1000;
        /* Certifica que fica acima dos outros elementos */
    }

    #auto-save-popup.error {
        background-color: #f44336;
        /* Vermelho para erro */
    }

    /* Estilo para o modal do currículo */
    #curriculoModal .modal-dialog {
        max-width: 80vw;
        /* 80% da largura da viewport */
        height: 90vh;
        /* 90% da altura da viewport */
        margin: 30px auto;
    }

    #curriculoModal .modal-content {
        height: 100%;
        display: flex;
        flex-direction: column;
    }

    #curriculoModal .modal-body {
        flex: 1;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #f5f5f5;
    }

    #curriculoModal #curriculoIframe {
        width: calc(210mm * 0.9);
        /* 90% do tamanho A4 */
        height: calc(297mm * 0.9);
        /* 90% do tamanho A4 */
        border: none;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        background-color: white;
    }

    @media (max-width: 768px) {
        #curriculoModal .modal-dialog {
            max-width: 95vw;
            margin: 10px;
        }

        #curriculoModal #curriculoIframe {
            width: 100%;
            height: 100%;
        }
    }

    .form-group {
        position: relative;
        margin-bottom: 1rem;
    }

    .form-control {
        padding-right: 30px;
        /* Espaço para o indicador */
    }

    .save-status {
        animation: fadeInOut 0.3s ease-in-out;
    }

    @keyframes fadeInOut {
        0% {
            opacity: 0;
        }

        50% {
            opacity: 1;
        }

        100% {
            opacity: 0;
        }
    }

    #auto-save-popup {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: 10px 20px;
        border-radius: 5px;
        font-size: 14px;
        z-index: 9999;
        transition: all 0.3s ease;
        opacity: 0;
        visibility: hidden;
    }

    #auto-save-popup.show {
        opacity: 1;
        visibility: visible;
    }

    #auto-save-popup.success {
        background-color: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
    }

    #auto-save-popup.error {
        background-color: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
    }

    /* Estilos para campos em salvamento */
    .saving {
        background-color: #fff3cd !important;
        border-color: #ffeeba !important;
    }

    /* Estilos para campos salvos com sucesso */
    .saved {
        background-color: #d4edda !important;
        border-color: #c3e6cb !important;
        transition: background-color 0.5s ease;
    }

    /* Estilos para campos com erro */
    .error {
        background-color: #f8d7da !important;
        border-color: #f5c6cb !important;
    }

    .form-check {
        position: relative;
        padding-right: 30px;
        /* Espaço para o indicador */
        margin-bottom: 0.5rem;
    }

    /* Ajuste específico para grupos de checkbox/radio */
    .checkbox-group .form-check,
    .checkbox-regioes .form-check {
        padding-right: 30px;
    }

    /* Indicador de status para checkbox/radio */
    .form-check .save-status {
        position: absolute;
        right: 5px;
        top: 50%;
        transform: translateY(-50%);
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        background: white;
        border: 2px solid transparent;
        transition: all 0.3s ease;
        z-index: 2;
    }

    /* Estados do indicador */
    .form-check .save-status.saving {
        border-color: #ffd700;
        background-color: #fff3cd;
    }

    .form-check .save-status.saved {
        border-color: #4CAF50;
        background-color: #e8f5e9;
    }

    .form-check .save-status.error {
        border-color: #f44336;
        background-color: #ffebee;
    }
</style>

<!--<a href="javascript:history.back()" class="back-button">
    <i class="fas fa-arrow-left"></i>
    <span>Voltar</span>
</a>-->


<div class="container my-5">

    <div class="header-info">

        <!-- Exibição do recrutador -->
        <div class="info-item d-flex align-items-center">
            <i class="fas fa-user me-2"></i>
            <span id="recrutador" class="fw-bold">
                Recrutador:
            </span>

            <!-- Select para o recrutador - sempre visível -->
            <select id="recrutador-select" class="form-control form-control-sm mx-2" name="recrutador"
                style="width: auto;">
                <option value="" {% if not form_data.recrutador or form_data.recrutador=='None' %}selected{% endif %}>
                    Escolha o recrutador</option>
                <option value="Samira Barbosa" {% if form_data.recrutador=='Samira Barbosa' %}selected{% endif %}>Samira
                    Barbosa</option>
                <option value="Nara Rodrigues" {% if form_data.recrutador=='Nara Rodrigues' %}selected{% endif %}>Nara
                    Rodrigues</option>
                <option value="Wilson Monteiro" {% if form_data.recrutador=='Wilson Monteiro' %}selected{% endif %}>
                    Wilson Monteiro</option>
                <option value="Rafaella Capanema" {% if form_data.recrutador=='Rafaella Capanema' %}selected{% endif %}>
                    Rafaella Capanema</option>
                <option value="Grasielle Mapa" {% if form_data.recrutador=='Grasielle Mapa' %}selected{% endif %}>
                    Grasielle Mapa</option>
                <option value="Guilherme Vieira" {% if form_data.recrutador=='Guilherme Vieira' %}selected{% endif %}>
                    Guilherme Vieira</option>
            </select>
        </div>

        <!-- Script para validar seleção de recrutador -->
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const recrutadorSelect = document.getElementById('recrutador-select');
                const registrationForm = document.getElementById('registrationForm');

                // Salva o valor atual para restaurar caso necessário
                let valorOriginal = recrutadorSelect.value;

                registrationForm.addEventListener('submit', function (event) {
                    if (recrutadorSelect.value === "") {
                        event.preventDefault();
                        alert('Por favor, selecione um recrutador antes de salvar.');
                        return false;
                    }
                });

                // Quando o select for alterado, atualize o valor salvo e force um evento de mudança
                recrutadorSelect.addEventListener('change', function () {
                    if (recrutadorSelect.value !== "") {
                        valorOriginal = recrutadorSelect.value;

                        // Força o salvamento automático quando o recrutador for alterado
                        const recrutadorValue = recrutadorSelect.value;
                        console.log("Recrutador selecionado: " + recrutadorValue);

                        // Usa AJAX para salvar imediatamente o recrutador
                        fetch('/set_recruiter', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/x-www-form-urlencoded',
                                'X-Requested-With': 'XMLHttpRequest'
                            },
                            body: `cpf=${document.getElementById('cpf').value}&recrutador=${recrutadorValue}`
                        })
                            .then(response => response.json())
                            .then(data => {
                                console.log("Recrutador salvo:", data);
                                if (data.success) {
                                    // Notifica o usuário que o recrutador foi salvo
                                    const autoSavePopup = document.getElementById('auto-save-popup');
                                    if (autoSavePopup) {
                                        autoSavePopup.textContent = 'Recrutador salvo com sucesso!';
                                        autoSavePopup.classList.add('success');
                                        autoSavePopup.classList.add('show');
                                        setTimeout(() => {
                                            autoSavePopup.classList.remove('show');
                                        }, 3000);
                                    }
                                }
                            })
                            .catch(error => {
                                console.error("Erro ao salvar recrutador:", error);
                            });
                    }
                });

                // Ao perder o foco, se estiver vazio, restaure para o valor original
                recrutadorSelect.addEventListener('blur', function () {
                    if (recrutadorSelect.value === "" && valorOriginal !== "") {
                        recrutadorSelect.value = valorOriginal;
                    }
                });

                // Executa change uma vez para garantir que o recrutador atual seja salvo
                if (recrutadorSelect.value !== "") {
                    // Simula um evento de mudança para salvar o recrutador atual
                    const event = new Event('change');
                    recrutadorSelect.dispatchEvent(event);
                }
            });
        </script>

        <!-- Modal removido pois não é mais necessário -->







        <div class="info-item">
            <i class="fas fa-calendar-alt"></i>
            <span>
                {% if form_data.created_at %}
                Data: {{ form_data.created_at | format_brazilian_date }}
                {% endif %}
            </span>
        </div>

        <div class="info-item">
            <i class="fas fa-file-alt"></i>
            {% if form_data.curriculo %}
            <button type="button" id="viewCurriculo" class="btn btn-primary"
                style="background-color: #AB1A18; color: white; border-color: #AB1A18;"
                data-curriculo="{{ url_for('static', filename='uploads/' ~ form_data.curriculo) }}">
                Ver Currículo
            </button>
            {% else %}
            <span>Sem currículo</span>
            {% endif %}
        </div>

        <div class="info-item">
            <i class="fas fa-info-circle"></i>
            <span id="form-status" class="badge badge-info">
                {{ form_data.get('situacao', 'Não Avaliado') }}
            </span>
        </div>
        <input type="hidden" name="situacao" id="situacao" value="{{ form_data.get('situacao', 'Não Avaliado') }}">




    </div>

    <!-- Modal -->
    <div class="modal fade" id="curriculoModal" tabindex="-1" role="dialog" aria-labelledby="curriculoModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="curriculoModalLabel">Currículo</h5>
                    <!-- Botão X removido -->
                </div>
                <div class="modal-body">
                    <iframe id="curriculoIframe" src="" style="width: 100%; height: 100%;"></iframe>
                </div>
                <div class="modal-footer">
                    <a id="baixarCurriculo" href="{{ url_for('static', filename='uploads/' ~ form_data.curriculo) }}"
                        class="btn btn-danger" download>Baixar</a>
                    <button type="button" class="btn btn-danger" id="closeModalButton">Fechar</button>
                </div>
            </div>
        </div>
    </div>


</div>


<form id="registrationForm"
    action="{{ url_for('submit_form') if not form_data.id else url_for('update_form', cpf=form_data.cpf, _external=True) }}"
    method="POST" enctype="multipart/form-data">

    <input type="hidden" id="registro_id" name="registro_id" value="{{ form_data.id }}">

    <!-- Upload de Currículo -->
    <div class="form-group">
        <label for="curriculo">Currículo:</label>
        <div class="input-group">
            <input type="file" class="form-control" id="curriculo" name="curriculo" accept=".pdf,.doc,.docx,.txt">
            <button type="button" class="btn btn-danger" id="enviarCurriculo">
                <i class="fas fa-upload"></i> Enviar
            </button>
        </div>
        <small class="form-text text-muted">Formatos aceitos: PDF, DOC, DOCX, TXT (Máximo 10MB)</small>
        <div id="upload-status" class="mt-2" style="display: none;"></div>
    </div>

    <script>
        document.getElementById('enviarCurriculo').addEventListener('click', async function () {
            console.log('Botão de upload clicado');
            
            const fileInput = document.getElementById('curriculo');
            const file = fileInput.files[0];
            const uploadStatus = document.getElementById('upload-status');
            const enviarBtn = document.getElementById('enviarCurriculo');

            console.log('Arquivo selecionado:', file);

            // Limpa status anterior
            uploadStatus.innerHTML = '';
            uploadStatus.style.display = 'block';

            if (!file) {
                console.log('Nenhum arquivo selecionado');
                uploadStatus.innerHTML = '<div class="alert alert-warning">Por favor, selecione um arquivo primeiro.</div>';
                return;
            }

            // Validação do tamanho do arquivo (10MB)
            const maxSize = 10 * 1024 * 1024; // 10MB em bytes
            if (file.size > maxSize) {
                console.log('Arquivo muito grande:', file.size, 'bytes');
                uploadStatus.innerHTML = '<div class="alert alert-danger">Arquivo muito grande. Tamanho máximo: 10MB</div>';
                return;
            }

            // Validação do tipo de arquivo
            const allowedTypes = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'text/plain'];
            console.log('Tipo do arquivo:', file.type);
            if (!allowedTypes.includes(file.type)) {
                console.log('Tipo de arquivo não permitido:', file.type);
                uploadStatus.innerHTML = '<div class="alert alert-danger">Tipo de arquivo não suportado. Use PDF, DOC, DOCX ou TXT.</div>';
                return;
            }

            // Desabilita o botão durante o upload
            enviarBtn.disabled = true;
            enviarBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Enviando...';
            uploadStatus.innerHTML = '<div class="alert alert-info">Enviando arquivo...</div>';

            const formData = new FormData();
            formData.append('curriculo', file);
            
            // Adiciona o CPF para atualizar o banco de dados
            const cpf = document.getElementById('cpf').value;
            if (cpf) {
                formData.append('cpf', cpf);
            }

            console.log('FormData criado, enviando para /upload_curriculo...');

            try {
                const response = await fetch('/upload_curriculo', {
                    method: 'POST',
                    body: formData
                });

                console.log('Resposta recebida:', response);
                console.log('Status:', response.status);
                console.log('Headers:', response.headers);

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();
                console.log('Resultado do upload:', result);

                if (result.success) {
                    uploadStatus.innerHTML = '<div class="alert alert-success">Currículo enviado com sucesso!</div>';
                    
                    // Atualiza a visualização do currículo
                    const viewCurriculoBtn = document.getElementById('viewCurriculo');
                    if (viewCurriculoBtn) {
                        viewCurriculoBtn.dataset.curriculo = `/static/uploads/${result.filename}`;
                        viewCurriculoBtn.style.display = 'inline-block';
                    } else {
                        // Se não existir o botão, cria um novo
                        const infoItem = document.querySelector('.info-item:has(.fa-file-alt)');
                        if (infoItem) {
                            const newBtn = document.createElement('button');
                            newBtn.type = 'button';
                            newBtn.id = 'viewCurriculo';
                            newBtn.className = 'btn btn-primary';
                            newBtn.style.cssText = 'background-color: #AB1A18; color: white; border-color: #AB1A18;';
                            newBtn.dataset.curriculo = `/static/uploads/${result.filename}`;
                            newBtn.textContent = 'Ver Currículo';
                            infoItem.innerHTML = infoItem.innerHTML.replace('<span>Sem currículo</span>', '');
                            infoItem.appendChild(newBtn);
                        }
                    }

                    // Limpa o input de arquivo
                    fileInput.value = '';
                    
                    // Recarrega a página após 2 segundos para mostrar o currículo
                    setTimeout(() => {
                        window.location.reload();
                    }, 2000);
                } else {
                    console.error('Erro retornado pelo servidor:', result.message);
                    uploadStatus.innerHTML = `<div class="alert alert-danger">Erro ao enviar o currículo: ${result.message}</div>`;
                }
            } catch (error) {
                console.error('Erro no upload:', error);
                uploadStatus.innerHTML = '<div class="alert alert-danger">Erro ao enviar o currículo. Verifique sua conexão e tente novamente.</div>';
            } finally {
                // Reabilita o botão
                enviarBtn.disabled = false;
                enviarBtn.innerHTML = '<i class="fas fa-upload"></i> Enviar';
            }
        });

        // Adiciona validação visual ao selecionar arquivo
        document.getElementById('curriculo').addEventListener('change', function() {
            const file = this.files[0];
            const uploadStatus = document.getElementById('upload-status');
            
            console.log('Arquivo selecionado:', file);
            
            if (file) {
                const maxSize = 10 * 1024 * 1024;
                if (file.size > maxSize) {
                    uploadStatus.innerHTML = '<div class="alert alert-warning">Arquivo muito grande. Tamanho máximo: 10MB</div>';
                    uploadStatus.style.display = 'block';
                } else {
                    uploadStatus.innerHTML = '<div class="alert alert-info">Arquivo selecionado: ' + file.name + '</div>';
                    uploadStatus.style.display = 'block';
                }
            }
        });
    </script>

    <!-- Cargo indicado -->
    <div class="form-group">
        <h5>Cargos Indicados</h5>
        <div class="select-indicated-cargo" id="select-indicated-cargo" style="cursor: pointer;">
            <p>Selecionar Cargos Indicados</p>
        </div>
        <div id="cargo-indicado-checkboxes" class="checkbox-group" style="display: none; margin-top: 10px;">
            <div class="form-check">
                <input class="checkbox" type="checkbox" id="cargo1" name="cargo_indicado" value="MANUTENÇÃO" {%
                    if 'MANUTENÇÃO' in form_data.cargo_indicado %}checked{% endif %}>
                <label class="form-check-label" for="cargo1">MANUTENÇÃO</label>
            </div>
            <div class="form-check">
                <input class="checkbox" type="checkbox" id="cargo2" name="cargo_indicado" value="ADMINISTRATIVO" {%
                    if 'ADMINISTRATIVO' in form_data.cargo_indicado %}checked{% endif %}>
                <label class="form-check-label" for="cargo2">ADMINISTRATIVO</label>
            </div>
            <div class="form-check">
                <input class="checkbox" type="checkbox" id="cargo3" name="cargo_indicado" value="JOVEM APRENDIZ LIMPEZA"
                    {% if 'JOVEM APRENDIZ LIMPEZA' in form_data.cargo_indicado %}checked{% endif %}>
                <label class="form-check-label" for="cargo3">JOVEM APRENDIZ LIMPEZA</label>
            </div>
            <div class="form-check">
                <input class="checkbox" type="checkbox" id="cargo4" name="cargo_indicado"
                    value="JOVEM APRENDIZ ADMINISTRATIVO" {% if 'JOVEM APRENDIZ ADMINISTRATIVO' in
                    form_data.cargo_indicado %}checked{% endif %}>
                <label class="form-check-label" for="cargo4">JOVEM APRENDIZ ADMINISTRATIVO</label>
            </div>
            <div class="form-check">
                <input class="checkbox" type="checkbox" id="cargo5" name="cargo_indicado" value="MANOBRISTA" {%
                    if 'MANOBRISTA' in form_data.cargo_indicado %}checked{% endif %}>
                <label class="form-check-label" for="cargo5">MANOBRISTA</label>
            </div>
            <div class="form-check">
                <input class="checkbox" type="checkbox" id="cargo6" name="cargo_indicado" value="RECEPCIONISTA" {%
                    if 'RECEPCIONISTA' in form_data.cargo_indicado %}checked{% endif %}>
                <label class="form-check-label" for="cargo6">RECEPCIONISTA</label>
            </div>
            <div class="form-check">
                <input class="checkbox" type="checkbox" id="cargo7" name="cargo_indicado" value="PORTARIA" {%
                    if 'PORTARIA' in form_data.cargo_indicado %}checked{% endif %}>
                <label class="form-check-label" for="cargo7">PORTARIA</label>
            </div>
            <div class="form-check">
                <input class="checkbox" type="checkbox" id="cargo8" name="cargo_indicado" value="ASG" {% if 'ASG' in
                    form_data.cargo_indicado %}checked{% endif %}>
                <label class="form-check-label" for="cargo8">ASG</label>
            </div>
            <div class="form-check">
                <input class="checkbox" type="checkbox" id="cargo9" name="cargo_indicado" value="ZELADORIA" {%
                    if 'ZELADORIA' in form_data.cargo_indicado %}checked{% endif %}>
                <label class="form-check-label" for="cargo9">ZELADORIA</label>
            </div>
            <div class="form-check">
                <input class="checkbox" type="checkbox" id="cargo10" name="cargo_indicado" value="MENSAGEIRO" {%
                    if 'MENSAGEIRO' in form_data.cargo_indicado %}checked{% endif %}>
                <label class="form-check-label" for="cargo10">MENSAGEIRO</label>
            </div>
            <div class="form-check">
                <input class="checkbox" type="checkbox" id="cargo11" name="cargo_indicado" value="COPEIRA" {%
                    if 'COPEIRA' in form_data.cargo_indicado %}checked{% endif %}>
                <label class="form-check-label" for="cargo11">COPEIRA</label>
            </div>
            <div class="form-check">
                <input class="checkbox" type="checkbox" id="cargo12" name="cargo_indicado" value="SUPERVISOR PREDIAL" {%
                    if 'SUPERVISOR PREDIAL' in form_data.cargo_indicado %}checked{% endif %}>
                <label class="form-check-label" for="cargo12">SUPERVISOR PREDIAL</label>
            </div>
        </div>
        <!-- Mensagem de erro -->
        <small id="cargo-error" class="text-danger" style="display: none;">Selecione pelo menos um cargo.</small>
    </div>

    <!-- Seção de Dados Pessoais -->
    <div class="form-section">
        <h4>Dados Pessoais</h4>
        <div class="row">
            <!-- Primeira Coluna -->
            <div class="col-md-6">
                <div class="form-group">
                    <label for="nome_completo">Nome Completo:</label>
                    <input type="text" class="form-control" id="nome_completo" name="nome_completo"
                        value="{{ form_data.nome_completo }}">
                </div>
                <div class="form-group">
                    <label for="estado_civil">Estado Civil:</label>
                    <select class="form-control" id="estado_civil" name="estado_civil">
                        <option value="" disabled selected></option>
                        <option value="SOLTEIRO" {% if form_data.estado_civil=='SOLTEIRO' %}selected{% endif %}>
                            Solteiro</option>
                        <option value="CASADO" {% if form_data.estado_civil=='CASADO' %}selected{% endif %}>Casado
                        </option>
                        <option value="DIVORCIADO" {% if form_data.estado_civil=='DIVORCIADO' %}selected{% endif %}>
                            Divorciado</option>
                        <option value="VIÚVO" {% if form_data.estado_civil=='VIÚVO' %}selected{% endif %}>Viúvo
                        </option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="cep">CEP:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" id="cep" name="cep" value="{{ form_data.cep }}">
                        <button class="btn btn-outline-secondary" type="button" id="buscarCep">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="endereco">Endereço:</label>
                    <input type="text" class="form-control" id="endereco" name="endereco"
                        value="{{ form_data.endereco }}">
                </div>
                <div class="form-group">
                    <label for="numero">Número:</label>
                    <input type="text" class="form-control" id="numero" name="numero" value="{{ form_data.numero }}">
                </div>
                <div class="form-group">
                    <label for="complemento">Complemento:</label>
                    <input type="text" class="form-control" id="complemento" name="complemento"
                        value="{{ form_data.complemento }}">
                </div>
                <div class="form-group">
                    <label for="bairro">Bairro:</label>
                    <input type="text" class="form-control" id="bairro" name="bairro" value="{{ form_data.bairro }}">
                </div>
                <div class="form-group">
                    <label for="cidade">Cidade:</label>
                    <input type="text" class="form-control" id="cidade" name="cidade" value="{{ form_data.cidade }}">
                </div>
                <div class="form-group">
                    <label for="telefone">Telefone:</label>
                    <input type="text" class="form-control" id="telefone" name="telefone"
                        value="{{ form_data.telefone or '' }}">
                </div>
                <div class="form-group">
                    <label for="telefone_recado">Telefone para Recado:</label>
                    <input type="text" class="form-control" id="telefone_recado" name="telefone_recado"
                        value="{{ form_data.telefone_recado or '' }}" placeholder="(00) 00000-0000">
                </div>
                <div class="form-group">
                    <label for="email">E-mail:</label>
                    <input type="email" class="form-control" id="email" name="email" value="{{ form_data.email or '' }}"
                        placeholder="Digite seu e-mail">
                </div>
                <div class="form-group">
                    <label for="estado_nasc">Estado e Cidade de Nascimento:</label>
                    <select class="form-control" id="estado_nasc" name="estado_nasc"
                        onchange="carregarCidades(this.value)">
                        <option value="" selected disabled>Selecione o Estado</option>
                        <option value="AC" {% if form_data.estado_nasc=='AC' %}selected{% endif %}>Acre</option>
                        <option value="AL" {% if form_data.estado_nasc=='AL' %}selected{% endif %}>Alagoas</option>
                        <option value="AP" {% if form_data.estado_nasc=='AP' %}selected{% endif %}>Amapá</option>
                        <option value="AM" {% if form_data.estado_nasc=='AM' %}selected{% endif %}>Amazonas</option>
                        <option value="BA" {% if form_data.estado_nasc=='BA' %}selected{% endif %}>Bahia</option>
                        <option value="CE" {% if form_data.estado_nasc=='CE' %}selected{% endif %}>Ceará</option>
                        <option value="DF" {% if form_data.estado_nasc=='DF' %}selected{% endif %}>Distrito Federal
                        </option>
                        <option value="ES" {% if form_data.estado_nasc=='ES' %}selected{% endif %}>Espírito Santo
                        </option>
                        <option value="GO" {% if form_data.estado_nasc=='GO' %}selected{% endif %}>Goiás</option>
                        <option value="MA" {% if form_data.estado_nasc=='MA' %}selected{% endif %}>Maranhão</option>
                        <option value="MT" {% if form_data.estado_nasc=='MT' %}selected{% endif %}>Mato Grosso
                        </option>
                        <option value="MS" {% if form_data.estado_nasc=='MS' %}selected{% endif %}>Mato Grosso do
                            Sul</option>
                        <option value="MG" {% if form_data.estado_nasc=='MG' %}selected{% endif %}>Minas Gerais
                        </option>
                        <option value="PA" {% if form_data.estado_nasc=='PA' %}selected{% endif %}>Pará</option>
                        <option value="PB" {% if form_data.estado_nasc=='PB' %}selected{% endif %}>Paraíba</option>
                        <option value="PR" {% if form_data.estado_nasc=='PR' %}selected{% endif %}>Paraná</option>
                        <option value="PE" {% if form_data.estado_nasc=='PE' %}selected{% endif %}>Pernambuco
                        </option>
                        <option value="PI" {% if form_data.estado_nasc=='PI' %}selected{% endif %}>Piauí</option>
                        <option value="RJ" {% if form_data.estado_nasc=='RJ' %}selected{% endif %}>Rio de Janeiro
                        </option>
                        <option value="RN" {% if form_data.estado_nasc=='RN' %}selected{% endif %}>Rio Grande do
                            Norte</option>
                        <option value="RS" {% if form_data.estado_nasc=='RS' %}selected{% endif %}>Rio Grande do Sul
                        </option>
                        <option value="RO" {% if form_data.estado_nasc=='RO' %}selected{% endif %}>Rondônia</option>
                        <option value="RR" {% if form_data.estado_nasc=='RR' %}selected{% endif %}>Roraima</option>
                        <option value="SC" {% if form_data.estado_nasc=='SC' %}selected{% endif %}>Santa Catarina
                        </option>
                        <option value="SP" {% if form_data.estado_nasc=='SP' %}selected{% endif %}>São Paulo
                        </option>
                        <option value="SE" {% if form_data.estado_nasc=='SE' %}selected{% endif %}>Sergipe</option>
                        <option value="TO" {% if form_data.estado_nasc=='TO' %}selected{% endif %}>Tocantins
                        </option>
                    </select>
                    <select class="form-control mt-2" id="cidade_nasc" name="cidade_nasc">
                        <option value="" disabled>Selecione a cidade</option>
                        {% if form_data.cidade_nasc %}
                        <option value="{{ form_data.cidade_nasc }}" selected>{{ form_data.cidade_nasc }}</option>
                        {% endif %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="data_nasc">Data de Nascimento:</label>
                    <input type="date" class="form-control" id="data_nasc" name="data_nasc"
                        value="{{ form_data.data_nasc }}">
                </div>
                <div class="form-group">
                    <label for="idade">Idade:</label>
                    <input type="number" class="form-control" id="idade" name="idade" value="{{ form_data.idade }}"
                        readonly>
                </div>
                <div class="form-group">
                    <label for="escolaridade">Escolaridade:</label>
                    <select class="form-control" id="escolaridade" name="escolaridade">
                        <option value="" disabled selected>Selecione a escolaridade</option>
                        <option value="FUNDAMENTAL INCOMPLETO" {% if form_data.escolaridade=='FUNDAMENTAL INCOMPLETO'
                            %}selected{% endif %}>Fundamental
                            Incompleto</option>
                        <option value="FUNDAMENTAL COMPLETO" {% if form_data.escolaridade=='FUNDAMENTAL COMPLETO'
                            %}selected{% endif %}>Fundamental Completo</option>
                        <option value="MÉDIO INCOMPLETO" {% if form_data.escolaridade=='MÉDIO INCOMPLETO' %}selected{%
                            endif %}>Médio Incompleto</option>
                        <option value="MÉDIO COMPLETO" {% if form_data.escolaridade=='MÉDIO COMPLETO' %}selected{% endif
                            %}>Médio Completo</option>
                        <option value="TÉCNICO INCOMPLETO" {% if form_data.escolaridade=='TÉCNICO INCOMPLETO'
                            %}selected{% endif %}>Técnico Incompleto</option>
                        <option value="TÉCNICO COMPLETO" {% if form_data.escolaridade=='TÉCNICO COMPLETO' %}selected{%
                            endif %}>Técnico Completo</option>
                        <option value="SUPERIOR INCOMPLETO" {% if form_data.escolaridade=='SUPERIOR INCOMPLETO'
                            %}selected{% endif %}>Superior Incompleto</option>
                        <option value="SUPERIOR COMPLETO" {% if form_data.escolaridade=='SUPERIOR COMPLETO' %}selected{%
                            endif %}>Superior Completo</option>
                        <option value="PÓS-GRADUAÇÃO" {% if form_data.escolaridade=='PÓS-GRADUAÇÃO' %}selected{% endif
                            %}>Pós-graduação</option>
                        <option value="MESTRADO" {% if form_data.escolaridade=='MESTRADO' %}selected{% endif %}>
                            Mestrado</option>
                        <option value="DOUTORADO" {% if form_data.escolaridade=='DOUTORADO' %}selected{% endif %}>
                            Doutorado</option>
                    </select>
                </div>
            </div>

            <!-- Segunda Coluna -->
            <div class="col-md-6">
                <!-- Campo para selecionar o número de filhos -->
                <div class="form-group">
                    <label for="numero_filhos">Número de Filhos:</label>
                    <select class="form-control" id="numero_filhos" name="numero_filhos"
                        onchange="gerarCamposIdadesFilhos()">
                        <option value="" disabled selected>Selecione...</option>
                        {% for i in range(0, 11) %}
                        <option value="{{ i }}" {% if form_data.numero_filhos==i %}selected{% endif %}>{{ i }}
                        </option>
                        {% endfor %}
                    </select>
                </div>


                <div class="form-group">
                    <label>Fumante:</label>
                    <div>
                        <input type="radio" id="fumante_sim" name="fumante" value="SIM" {% if form_data.fumante=='SIM'
                            %}checked{% endif %}>
                        <label for="fumante_sim">Sim</label>
                        <input type="radio" id="fumante_nao" name="fumante" value="NÃO" {% if form_data.fumante=='NÃO'
                            %}checked{% endif %}>
                        <label for="fumante_nao">Não</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Bebida:</label>
                    <div>
                        <input type="radio" id="bebida_sim" name="bebida" value="SIM" {% if form_data.bebida=='SIM'
                            %}checked{% endif %}>
                        <label for="bebida_sim">Sim</label>
                        <input type="radio" id="bebida_nao" name="bebida" value="NÃO" {% if form_data.bebida=='NÃO'
                            %}checked{% endif %}>
                        <label for="bebida_nao">Não</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="alergia">Alergia:</label>
                    <input type="text" class="form-control" id="alergia" name="alergia" value="{{ form_data.alergia }}">
                </div>
                <div class="form-group">
                    <label for="medicamento_constante">Medicamento de Uso Constante:</label>
                    <div>
                        <input type="radio" id="medicamento_sim" name="medicamento_constante" value="SIM" {% if
                            form_data.medicamento_constante=='SIM' %}checked{% endif %}>
                        <label for="medicamento_sim">Sim</label>
                        <input type="radio" id="medicamento_nao" name="medicamento_constante" value="NÃO" {% if
                            form_data.medicamento_constante=='NÃO' %}checked{% endif %}>
                        <label for="medicamento_nao">Não</label>
                    </div>
                    <input type="text" class="form-control mt-2" id="qual_medicamento" name="qual_medicamento"
                        placeholder="Qual?" value="{{ form_data.qual_medicamento }}">
                </div>

                <!-- Não Perguntar ao Candidato -->
                <h4>Não Perguntar ao Candidato <span style="color: red;">*</span></h4>
                <div class="form-group">
                    <label for="genero">Gênero: <span style="color: red;">*</span></label>
                    <select class="form-control" id="genero" name="genero">
                        <option value="" disabled selected></option>
                        <option value="HOMEM" {% if form_data.genero=='HOMEM' %}selected{% endif %}>Homem</option>
                        <option value="MULHER" {% if form_data.genero=='MULHER' %}selected{% endif %}>Mulher
                        </option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="peso">Peso: <span style="color: red;">*</span></label>
                    <select class="form-control" id="peso" name="peso">
                        <option value="" disabled selected></option>
                        <option value="Normal" {% if form_data.peso=='Normal' %}selected{% endif %}>Normal</option>
                        <option value="Sobrepeso" {% if form_data.peso=='Sobrepeso' %}selected{% endif %}>Sobrepeso
                        </option>
                        <option value="Obesidade" {% if form_data.peso=='Obesidade' %}selected{% endif %}>Obesidade
                        </option>
                        <option value="Magro" {% if form_data.peso=='Magro' %}selected{% endif %}>Magro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="cor_pele">Cor de Pele: <span style="color: red;">*</span></label>
                    <select class="form-control" id="cor_pele" name="cor_pele">
                        <option value="" disabled selected></option>
                        <option value="BRANCA" {% if form_data.cor_pele=='BRANCA' %}selected{% endif %}>Branca
                        </option>
                        <option value="PRETA" {% if form_data.cor_pele=='PRETA' %}selected{% endif %}>Preta</option>
                        <option value="PARDA" {% if form_data.cor_pele=='PARDA' %}selected{% endif %}>Parda</option>
                        <option value="AMARELA" {% if form_data.cor_pele=='AMARELA' %}selected{% endif %}>Amarela
                        </option>
                        <option value="INDÍGENA" {% if form_data.cor_pele=='INDÍGENA' %}selected{% endif %}>Indígena
                        </option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tatuagem">Tatuagem: <span style="color: red;">*</span></label>
                    <select class="form-control" id="tatuagem" name="tatuagem">
                        <option value="" disabled selected></option>
                        <option value="SIM, VISÍVEL" {% if form_data.tatuagem=='SIM, VISÍVEL' %}selected{% endif %}>
                            Sim, Visível</option>
                        <option value="SIM" {% if form_data.tatuagem=='SIM' %}selected{% endif %}>Sim</option>
                        <option value="NÃO" {% if form_data.tatuagem=='NÃO' %}selected{% endif %}>Não</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="pcd">PCD (Pessoa com Deficiência):</label>
                    <select class="form-control" id="pcd" name="pcd">
                        <option value="" disabled selected></option>
                        <option value="Sim" {% if form_data.pcd=="Sim" %} selected {% endif %}>Sim</option>
                        <option value="Não" {% if form_data.pcd=="Não" %} selected {% endif %}>Não</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="perfil">Perfil:</label>
                    <select class="form-control" id="perfil" name="perfil">
                        <option value="" disabled selected></option>
                        <option value="OSTENSIVO" {% if form_data.perfil=='OSTENSIVO' %}selected{% endif %}>
                            Ostensivo</option>
                        <option value="SOCIAL" {% if form_data.perfil=='SOCIAL' %}selected{% endif %}>Social
                        </option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Seção de Documentação -->
    <div class="form-section">
        <h4>Documentação</h4>

        <div class="form-group">
            <label for="cpf">CPF:</label>
            <input type="text" class="form-control" id="cpf" name="cpf" value="{{ form_data.cpf }}" required>
        </div>
    </div>

    <!-- Seção de Cursos Realizados -->
    <div class="form-section">
        <h4>Cursos Realizados por Você</h4>
        <div class="form-group">
            <label for="cursos_realizados">Descreva os cursos que você já realizou:</label>
            <textarea class="form-control" id="cursos_realizados" name="cursos_realizados"
                rows="4">{{ form_data.cursos_realizados }}</textarea>
        </div>
    </div>


    <div class="form-section">
        <h4>Conhecimento de Digitação</h4>
        <div class="form-group">
            <label for="conhecimento_digitacao">Selecione:</label>
            <select class="form-control" id="conhecimento_digitacao" name="conhecimento_digitacao">
                <option value="" disabled selected></option>
                <option id="bom" value="Bom" {% if form_data.conhecimento_digitacao=='Bom' %}selected{% endif %}>Bom
                </option>
                <option id="regular" value="Regular" {% if form_data.conhecimento_digitacao=='Regular' %}selected{%
                    endif %}>Regular</option>
                <option id="ruim" value="Ruim" {% if form_data.conhecimento_digitacao=='Ruim' %}selected{% endif %}>
                    Ruim</option>
            </select>
        </div>
    </div>


    <!-- Seção de Regiões de Preferência -->
    <div class="form-section">
        <h4>Regiões de Preferência para Trabalhar</h4>
        <div class="checkbox-group checkbox-regioes">

            <div class="checkbox-group checkbox-regioes">
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_barreiro" name="regioes_preferencia"
                        value="REGIÃO BARREIRO" {% if form_data.regioes_preferencia and 'REGIÃO BARREIRO' in
                        form_data.regioes_preferencia %}checked{% endif %}>
                    <label class="form-check-label" for="regiao_barreiro">Região Barreiro</label>
                </div>
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_centro_sul" name="regioes_preferencia"
                        value="REGIÃO CENTRO SUL" {% if form_data.regioes_preferencia and 'REGIÃO CENTRO SUL' in
                        form_data.regioes_preferencia %}checked{% endif %}>
                    <label class="form-check-label" for="regiao_centro_sul">Região Centro Sul</label>
                </div>
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_leste" name="regioes_preferencia"
                        value="REGIÃO LESTE" {% if form_data.regioes_preferencia and 'REGIÃO LESTE' in
                        form_data.regioes_preferencia %}checked{% endif %}>
                    <label class="form-check-label" for="regiao_leste">Região Leste</label>
                </div>
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_nordeste" name="regioes_preferencia"
                        value="REGIÃO NORDESTE" {% if form_data.regioes_preferencia and 'REGIÃO NORDESTE' in
                        form_data.regioes_preferencia %}checked{% endif %}>
                    <label class="form-check-label" for="regiao_nordeste">Região Nordeste</label>
                </div>
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_noroeste" name="regioes_preferencia"
                        value="REGIÃO NOROESTE" {% if form_data.regioes_preferencia and 'REGIÃO NOROESTE' in
                        form_data.regioes_preferencia %}checked{% endif %}>
                    <label class="form-check-label" for="regiao_noroeste">Região Noroeste</label>
                </div>
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_norte" name="regioes_preferencia"
                        value="REGIÃO NORTE" {% if form_data.regioes_preferencia and 'REGIÃO NORTE' in
                        form_data.regioes_preferencia %}checked{% endif %}>
                    <label class="form-check-label" for="regiao_norte">Região Norte</label>
                </div>
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_oeste" name="regioes_preferencia"
                        value="REGIÃO OESTE" {% if form_data.regioes_preferencia and 'REGIÃO OESTE' in
                        form_data.regioes_preferencia %}checked{% endif %}>
                    <label class="form-check-label" for="regiao_oeste">Região Oeste</label>
                </div>
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_pampulha" name="regioes_preferencia"
                        value="REGIÃO PAMPULHA" {% if form_data.regioes_preferencia and 'REGIÃO PAMPULHA' in
                        form_data.regioes_preferencia %}checked{% endif %}>
                    <label class="form-check-label" for="regiao_pampulha">Região Pampulha</label>
                </div>
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_venda_nova" name="regioes_preferencia"
                        value="REGIÃO VENDA NOVA" {% if form_data.regioes_preferencia and 'REGIÃO VENDA NOVA' in
                        form_data.regioes_preferencia %}checked{% endif %}>
                    <label class="form-check-label" for="regiao_venda_nova">Região Venda Nova</label>
                </div>
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_betim_contagem" name="regioes_preferencia"
                        value="REGIÃO BETIM/CONTAGEM" {% if form_data.regioes_preferencia and 'REGIÃO BETIM/CONTAGEM' in
                        form_data.regioes_preferencia %}checked{% endif %}>
                    <label class="form-check-label" for="regiao_betim_contagem">Região Betim/Contagem</label>
                </div>
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_nova_lima" name="regioes_preferencia"
                        value="REGIÃO NOVA LIMA" {% if form_data.regioes_preferencia and 'REGIÃO NOVA LIMA' in
                        form_data.regioes_preferencia %}checked{% endif %}>
                    <label class="form-check-label" for="regiao_nova_lima">Região Nova Lima</label>
                </div>
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_outros_municipios" name="regioes_preferencia"
                        value="OUTROS MUNICÍPIOS" {% if form_data.regioes_preferencia and 'OUTROS MUNICÍPIOS' in
                        form_data.regioes_preferencia %}checked{% endif %}>
                    <label class="form-check-label" for="regiao_outros_municipios">Outros Municípios</label>
                </div>
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_vli_sudeste" name="regioes_preferencia"
                        value="VLI SUDESTE" {% if form_data.regioes_preferencia and 'VLI SUDESTE' in
                        form_data.regioes_preferencia %}checked{% endif %}>
                    <label class="form-check-label" for="regiao_vli_sudeste">VLI SUDESTE</label>
                </div>
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_vli_nordeste" name="regioes_preferencia"
                        value="VLI NORDESTE" {% if form_data.regioes_preferencia and 'VLI NORDESTE' in
                        form_data.regioes_preferencia %}checked{% endif %}>
                    <label class="form-check-label" for="regiao_vli_nordeste">VLI NORDESTE</label>
                </div>
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_vli_centro_leste" name="regioes_preferencia"
                        value="VLI CENTRO LESTE" {% if form_data.regioes_preferencia and 'VLI CENTRO LESTE' in
                        form_data.regioes_preferencia %}checked{% endif %}>
                    <label class="form-check-label" for="regiao_vli_centro_leste">VLI CENTRO LESTE</label>
                </div>
                <div class="form-check">
                    <input class="checkbox" type="checkbox" id="regiao_vli_mg" name="regioes_preferencia" value="VLI MG"
                        {% if form_data.regioes_preferencia and 'VLI MG' in form_data.regioes_preferencia %}checked{%
                        endif %}>
                    <label class="form-check-label" for="regiao_vli_mg">VLI MG</label>
                </div>
            </div>


            <!-- Botão para selecionar todas as regiões -->
            <div class="form-check">
                <input class="checkbox" type="checkbox" id="selecionar_todas" onclick="toggleRegioes(this)">
                <label class="form-check-label" for="selecionar_todas">Selecionar Todas</label>
            </div>
        </div>
    </div>



    <!-- Seção de Disponibilidade de Horário -->
    <div class="form-section">
        <h4>Disponibilidade de Horário para Trabalhar</h4>
        <div class="checkbox-group checkbox-horarios">
            <div class="form-check">
                <input class="checkbox-horarios" type="checkbox" id="disponibilidade1" name="disponibilidade_horario"
                    value="44H (HORARIO COMERCIAL)" {% if form_data.disponibilidade_horario
                    and '44H (HORARIO COMERCIAL)' in form_data.disponibilidade_horario %}checked{% endif %}>
                <label class="form-check-label" for="disponibilidade1">44h (Horário Comercial)</label>
            </div>
            <div class="form-check">
                <input class="checkbox-horarios" type="checkbox" id="disponibilidade2" name="disponibilidade_horario"
                    value="12X36 DIA" {% if form_data.disponibilidade_horario and '12X36 DIA' in
                    form_data.disponibilidade_horario %}checked{% endif %}>
                <label class="form-check-label" for="disponibilidade2">12x36 Dia</label>
            </div>
            <div class="form-check">
                <input class="checkbox-horarios" type="checkbox" id="disponibilidade3" name="disponibilidade_horario"
                    value="12X36 NOITE" {% if form_data.disponibilidade_horario and '12X36 NOITE' in
                    form_data.disponibilidade_horario %}checked{% endif %}>
                <label class="form-check-label" for="disponibilidade3">12x36 Noite</label>
            </div>
            <div class="form-check">
                <input class="checkbox-horarios" type="checkbox" id="disponibilidade4" name="disponibilidade_horario"
                    value="FEIRISTA" {% if form_data.disponibilidade_horario and 'FEIRISTA' in
                    form_data.disponibilidade_horario %}checked{% endif %}>
                <label class="form-check-label" for="disponibilidade4">Ferista</label>
            </div>

            <!-- Diferenciando o checkbox de "Selecionar Todos" -->
            <div class="form-check">
                <input class="checkbox-select-all" type="checkbox" id="selectAllHorarios">
                <label class="form-check-label" for="selectAllHorarios">Selecionar Todos</label>
            </div>
        </div>
    </div>

    <div class="form-section">
        <h4>Empregos Informais</h4>
        <!-- Empregos Informais -->
        <div class="form-group">
            <label for="empregos_informais">Escreva sobre os empregos informais:</label>
            <textarea class="form-control" id="empregos_informais" name="empregos_informais"
                rows="5">{{ form_data.empregos_informais }}</textarea>
        </div>
    </div>


    <!-- Seção de Últimos Empregos -->
    <div class="form-section">
        <h4>Escreva sobre os 3 Últimos Empregos</h4>

        <!-- Empresa 1 -->
        <div class="form-group">
            <label for="empresa1">Empresa 1:</label>
            <input type="text" class="form-control" id="empresa1" name="empresa1" value="{{ form_data.empresa1 }}">
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="funcao1">Função:</label>
                    <input type="text" class="form-control" id="funcao1" name="funcao1" value="{{ form_data.funcao1 }}">
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="tempo_permanencia1">Tempo de Permanência:</label>
            <div class="row">
                <div class="col-md-4">
                    <input type="number" class="form-control" id="tempo_permanencia1_anos"
                        name="tempo_permanencia1_anos" placeholder="Anos"
                        value="{{ form_data.tempo_permanencia1_anos }}">
                </div>
                <div class="col-md-4">
                    <input type="number" class="form-control" id="tempo_permanencia1_meses"
                        name="tempo_permanencia1_meses" placeholder="Meses"
                        value="{{ form_data.tempo_permanencia1_meses }}">
                </div>
                <div class="col-md-4">
                    <input type="number" class="form-control" id="tempo_permanencia1_dias"
                        name="tempo_permanencia1_dias" placeholder="Dias"
                        value="{{ form_data.tempo_permanencia1_dias }}">
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="motivo_saida1">Motivo da Saída:</label>
            <input type="text" class="form-control" id="motivo_saida1" name="motivo_saida1"
                value="{{ form_data.motivo_saida1 }}">
        </div>
        <div class="form-group">
            <label for="salario1">Salário:</label>
            <input type="text" class="form-control salario-input" id="salario1" name="salario1"
                onkeyup="mascaraSalario(this)" value="{{ form_data.salario1 }}">
        </div>
        <div class="form-group">
            <label for="atividades1">Descreva as Atividades:</label>
            <textarea class="form-control" id="atividades_empresa1" name="atividades_empresa1"
                rows="3">{{ form_data.atividades_empresa1 }}</textarea>
        </div>

        <!-- Empresa 2 -->
        <div class="form-group">
            <label for="empresa2">Empresa 2:</label>
            <input type="text" class="form-control" id="empresa2" name="empresa2" value="{{ form_data.empresa2 }}">
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="funcao2">Função:</label>
                    <input type="text" class="form-control" id="funcao2" name="funcao2" value="{{ form_data.funcao2 }}">
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="tempo_permanencia2">Tempo de Permanência:</label>
            <div class="row">
                <div class="col-md-4">
                    <input type="number" class="form-control" id="tempo_permanencia2_anos"
                        name="tempo_permanencia2_anos" placeholder="Anos"
                        value="{{ form_data.tempo_permanencia2_anos }}">
                </div>
                <div class="col-md-4">
                    <input type="number" class="form-control" id="tempo_permanencia2_meses"
                        name="tempo_permanencia2_meses" placeholder="Meses"
                        value="{{ form_data.tempo_permanencia2_meses }}">
                </div>
                <div class="col-md-4">
                    <input type="number" class="form-control" id="tempo_permanencia2_dias"
                        name="tempo_permanencia2_dias" placeholder="Dias"
                        value="{{ form_data.tempo_permanencia2_dias }}">
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="motivo_saida2">Motivo da Saída:</label>
            <input type="text" class="form-control" id="motivo_saida2" name="motivo_saida2"
                value="{{ form_data.motivo_saida2 }}">
        </div>
        <div class="form-group">
            <label for="salario2">Salário:</label>
            <input type="text" class="form-control salario-input" id="salario2" name="salario2"
                onkeyup="mascaraSalario(this)" value="{{ form_data.salario2 }}">
        </div>
        <div class="form-group">
            <label for="atividades_empresa2">Descreva as Atividades:</label>
            <textarea class="form-control" id="atividades_empresa2" name="atividades_empresa2"
                rows="3">{{ form_data.atividades_empresa2 }}</textarea>
        </div>

        <!-- Empresa 3 -->
        <div class="form-group">
            <label for="empresa3">Empresa 3:</label>
            <input type="text" class="form-control" id="empresa3" name="empresa3" value="{{ form_data.empresa3 }}">
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="funcao3">Função:</label>
                    <input type="text" class="form-control" id="funcao3" name="funcao3" value="{{ form_data.funcao3 }}">
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="tempo_permanencia3">Tempo de Permanência:</label>
            <div class="row">
                <div class="col-md-4">
                    <input type="number" class="form-control" id="tempo_permanencia3_anos"
                        name="tempo_permanencia3_anos" placeholder="Anos"
                        value="{{ form_data.tempo_permanencia3_anos }}">
                </div>
                <div class="col-md-4">
                    <input type="number" class="form-control" id="tempo_permanencia3_meses"
                        name="tempo_permanencia3_meses" placeholder="Meses"
                        value="{{ form_data.tempo_permanencia3_meses }}">
                </div>
                <div class="col-md-4">
                    <input type="number" class="form-control" id="tempo_permanencia3_dias"
                        name="tempo_permanencia3_dias" placeholder="Dias"
                        value="{{ form_data.tempo_permanencia3_dias }}">
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="motivo_saida3">Motivo da Saída:</label>
            <input type="text" class="form-control" id="motivo_saida3" name="motivo_saida3"
                value="{{ form_data.motivo_saida3 }}">
        </div>
        <div class="form-group">
            <label for="salario3">Salário:</label>
            <input type="text" class="form-control salario-input" id="salario3" name="salario3"
                onkeyup="mascaraSalario(this)" value="{{ form_data.salario3 }}">
        </div>
        <div class="form-group">
            <label for="atividades_empresa3">Descreva as Atividades:</label>
            <textarea class="form-control" id="atividades_empresa3" name="atividades_empresa3"
                rows="3">{{ form_data.atividades_empresa3 }}</textarea>
        </div>
    </div>
    <!-- Seção de Observações -->
    <div class="form-section">
        <h4>Observações</h4>
        <div class="form-group">
            <textarea class="form-control" id="observacoes" name="observacoes"
                rows="4">{{ form_data.observacoes }}</textarea>
        </div>
    </div>




    <!-- Seção de Avaliações e Observações Internas -->
    <div class="evaluation-section"
        style="padding: 20px; background-color: #f9f9f9; border-radius: 8px; border: 1px solid #ddd;">
        <div class="evaluation-item" style="margin-bottom: 15px;">
            <label for="avaliacao_rh" style="font-weight: bold; color: #333;">Avaliação RH:</label>
            <select id="avaliacao_rh" name="avaliacao_rh" class="form-select" style="border: 1px solid #ccc;">
                <option value="" {% if not form_data.avaliacao_rh %}selected{% endif %}>Selecione...</option>
                <option value="Aprovado" {% if form_data.avaliacao_rh=="Aprovado" %}selected{% endif %}>Aprovado
                </option>
                <option value="Reprovado" {% if form_data.avaliacao_rh=="Reprovado" %}selected{% endif %}>
                    Reprovado</option>
            </select>
        </div>

        <div class="evaluation-item" style="margin-bottom: 15px;">
            <label for="sindicancia" style="font-weight: bold; color: #333;">Sindicância:</label>
            <select id="sindicancia" name="sindicancia" class="form-select" style="border: 1px solid #ccc;">
                <option value="" {% if not form_data.sindicancia %}selected{% endif %}>Selecione...</option>
                <option value="Em Verificação" {% if form_data.sindicancia=="Em Verificação" %}selected{% endif %}>Em
                    Verificação</option>
                <option value="Aprovado" {% if form_data.sindicancia=="Aprovado" %}selected{% endif %}>Aprovado</option>
                <option value="Reprovado" {% if form_data.sindicancia=="Reprovado" %}selected{% endif %}>Reprovado
                </option>
            </select>
        </div>

        <div class="evaluation-item" style="margin-bottom: 15px;">
            <label for="avaliacao_gerencia" style="font-weight: bold; color: #333;">Avaliação Gestor:</label>
            <select id="avaliacao_gerencia" name="avaliacao_gerencia" class="form-select"
                style="border: 1px solid #ccc;">
                <option value="" {% if not form_data.avaliacao_gerencia %}selected{% endif %}>Selecione...
                </option>
                <option value="Aprovado" {% if form_data.avaliacao_gerencia=="Aprovado" %}selected{% endif %}>
                    Aprovado</option>
                <option value="Reprovado" {% if form_data.avaliacao_gerencia=="Reprovado" %}selected{% endif %}>
                    Reprovado</option>
                <option value="Em Conversa" {% if form_data.avaliacao_gerencia=="Em Conversa" %}selected{% endif %}>Em
                    Conversa</option>
            </select>
        </div>

        <div class="evaluation-item" style="margin-bottom: 15px;">
            <label for="assinatura_gerencia" style="font-weight: bold; color: #333;">Assinatura
                Gerência:</label>
            <select id="assinatura_gerencia" name="assinatura_gerencia" class="form-select"
                style="border: 1px solid #ccc;">
                <option value="" {% if not form_data.assinatura_gerencia %}selected{% endif %}>Selecione...
                </option>

                <option value="Gilson Coelho" {% if form_data.assinatura_gerencia=="Gilson Coelho" %}selected{% endif
                    %}>
                    Gilson
                    Coelho</option>
                <option value="Jefferson Marques" {% if form_data.assinatura_gerencia=="Jefferson Marques"
                    %}selected{%endif %}>Jefferson Marques </option>
                <option value="Tiago Viera" {% if form_data.assinatura_gerencia=="Tiago Viera" %}selected{% endif %}>
                    Tiago Viera</option>
                <option value="Renato Hell" {% if form_data.assinatura_gerencia=="Renato Hell" %}selected{% endif %}>
                    Renato Hell</option>
                <option value="Ana Maria" {% if form_data.assinatura_gerencia=="Ana Maria" %}selected{% endif %}>
                    Ana Maria</option>
                <option value="Ronaldo Oliveira" {% if form_data.assinatura_gerencia=="Ronaldo Oliveira" %}selected{%
                    endif %}>Ronaldo Oliveira</option>
                <option value="Warlley Martins" {% if form_data.assinatura_gerencia=="Warlley Martins" %}selected{%
                    endif %}>Warlley Martins</option>
                <option value="Wilder Martins" {% if form_data.assinatura_gerencia=="Wilder Martins" %}selected{% endif
                    %}>
                    Wilder Martins</option>
                <option value="Wendel Dutra" {% if form_data.assinatura_gerencia=="Wendel Dutra" %}selected{% endif %}>
                    Wendel Dutra</option>
                <option value="André Buzin" {% if form_data.assinatura_gerencia=="André Buzin" %}selected{% endif %}>
                    André Buzin</option>
                <option value="Vandemil Junior" {% if form_data.assinatura_gerencia=="Vandemil Junior" %}selected{% endif %}>
                    Vandemil Junior</option>
            </select>
        </div>

        <div class="evaluation-item" style="margin-bottom: 15px;">
            <label for="admitido" style="font-weight: bold; color: #333;">Admitido:</label>
            <select id="admitido" name="admitido" class="form-select" style="border: 1px solid #ccc;" {% if
                form_data.admitido=='Sim' and not current_user.is_admin %}disabled{% endif %}>
                <option value="" {% if not form_data.admitido %}selected{% endif %}>Selecione...</option>
                <option value="Sim" {% if form_data.admitido=='Sim' %}selected{% endif %}>Sim</option>
                <option value="Não" {% if form_data.admitido=='Não' %}selected{% endif %}>Não</option>
                <option value="Em processo de admissão" {% if form_data.admitido=='Em processo de admissão' %}selected{% endif %}>Em processo de admissão</option>
            </select>
        </div>
    </div>


    <!-- Motivo da Reprovação pelo RH -->
    <div id="motivo_reprovacao_rh_container" style="display: none; margin-top: 15px;">
        <label for="motivo_reprovacao_rh_textarea" style="font-weight: bold; color: #AB1A18;">Motivo da Reprovação pelo
            RH</label>
        <textarea name="motivo_reprovacao_rh" id="motivo_reprovacao_rh_textarea" rows="3" class="form-control"
            style="border: 1px solid #AB1A18; resize: vertical; padding: 10px;"
            placeholder="Escreva o motivo da reprovação pelo RH...">{{ form_data.get('motivo_reprovacao_rh') if form_data.get('motivo_reprovacao_rh') else '' }}</textarea>
    </div>

    <!-- Motivo da Reprovação pelo Gerente -->
    <div id="motivo_reprovacao_gerente_container" style="display: none; margin-top: 15px;">
        <label for="motivo_reprovacao_gerente_textarea" style="font-weight: bold; color: #AB1A18;">Motivo da Reprovação
            pelo Gerente</label>
        <textarea name="motivo_reprovacao_gerente" id="motivo_reprovacao_gerente_textarea" rows="3" class="form-control"
            style="border: 1px solid #AB1A18; resize: vertical; padding: 10px;"
            placeholder="Escreva o motivo da reprovação pelo Gerente...">{{ form_data.get('motivo_reprovacao_gerente') if form_data.get('motivo_reprovacao_gerente') else '' }}</textarea>
    </div>



    <style>
        .modal-dialog {
            max-width: 350px;
            width: 100%;
            margin: auto;
        }

        .modal-content {
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
            width: 100%;
            height: 350px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
    </style>


</form>
</div>
<!-- Popup de salvamento automático -->
<div id="auto-save-popup"
    style="position: fixed; bottom: 20px; right: 20px; background-color: #4CAF50; color: white; padding: 10px 20px; border-radius: 5px; font-size: 14px; opacity: 0; visibility: hidden; transition: opacity 0.5s ease, visibility 0.5s ease;">
</div>

<!-- Carrega o script de auto-salvamento primeiro -->
<script src="{{ url_for('static', filename='js/auto_sav.js') }}"></script>

<script>
    // Verificar se o script de auto-salvamento foi carregado corretamente
    console.log('Página view_registration.html carregada. Verificando script auto-salvamento...');
    if (typeof autoSave === 'function') {
        console.log('Script de auto-salvamento encontrado e inicializado corretamente!');
    } else {
        console.error('ERRO: Script de auto-salvamento não foi inicializado!');
    }
</script>

<script src="{{ url_for('static', filename='js/form_submission.js') }}"></script>
<script src="{{ url_for('static', filename='js/calcularIdade.js') }}"></script>
<script src="{{ url_for('static', filename='js/verificarCPF.js') }}"></script>
<script src="{{ url_for('static', filename='js/viewCurriculo.js') }}"></script>
<script src="{{ url_for('static', filename='js/buscarCep.js') }}"></script>
<script src="{{ url_for('static', filename='js/carregarCidades.js') }}"></script>
<script src="{{ url_for('static', filename='js/mascaras.js') }}"></script>
<script src="{{ url_for('static', filename='js/idadeFilhos.js') }}"></script>
<script src="{{ url_for('static', filename='js/socket_recruiter.js') }}"></script>
<script src="{{ url_for('static', filename='js/avaliacoes.js') }}"></script>
<script src="{{ url_for('static', filename='js/selecionar_horarios.js') }}"></script>
<script src="{{ url_for('static', filename='js/motivo_reprovacao.js') }}"></script>
<script src="{{ url_for('static', filename='js/toggle_regioes.js') }}"></script>
<script src="{{ url_for('static', filename='js/select_cargos.js') }}"></script>





<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
<script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>

<script>
    // Inicializa a conexão com o Socket.IO
    var socket = io.connect('http://' + document.domain + ':' + location.port);
</script>





{% if form_data.situacao == "Em Conversa" and form_data.recrutador != current_user.username %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.querySelector('form');
        const checkboxes = document.querySelectorAll('input[name="cargo_indicado"]');
        const errorElement = document.getElementById('cargo-error');

        form.addEventListener('submit', (event) => {
            // Verifica se pelo menos um checkbox está selecionado
            const isChecked = Array.from(checkboxes).some(checkbox => checkbox.checked);

            if (!isChecked) {
                errorElement.style.display = 'block';
            } else {
                errorElement.style.display = 'none';
            }
        });
    });
</script>
{% endif %}

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const dataNascInput = document.getElementById('data_nasc');
        if (!dataNascInput) return;
        let v = (dataNascInput.value || '').trim();
        if (!v) return;
        // Converte de DD/MM/YYYY para YYYY-MM-DD quando necessário
        if (/^\d{2}\/\d{2}\/\d{4}$/.test(v)) {
            const [d, m, y] = v.split('/');
            dataNascInput.value = `${y}-${m.padStart(2, '0')}-${d.padStart(2, '0')}`;
        } else if (!/^\d{4}-\d{2}-\d{2}/.test(v) && v.length >= 10) {
            // Garante apenas a parte da data quando vier com hora
            dataNascInput.value = v.slice(0, 10);
        }
    });
</script>





{% endblock %}